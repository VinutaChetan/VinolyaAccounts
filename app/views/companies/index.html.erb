<script>
$(document).ready(function(){
    $('#myTable').DataTable();
});
</script>

<p id="notice"><%= notice %></p>

<% if current_user.is_admin?%>
  <%= link_to 'New Company', new_company_path,class: "btn btn-success" %>
<%end%><br/>

<h2 class="text-muted">Listing Companies</h2>
<br/>
<%if @companies.empty? %>
  <p>No companies found </p>
<%else %>
<div class="container">
<table class ="table table-striped" id="myTable">
  <thead>
    <tr>
      <th class="text-success">Name</th>
      <th class="text-success">Contact Number</th>
      <th class="text-success">Address</th>
      <th class="text-success">Mail Id</th>
      <th></th>
      <th></th>
    </tr>
  </thead>

  <tbody>
    <% @companies.order('created_at DESC').each do |company| %>
      <tr>
        <td><%= company.try(:name) %></td>
        <td><%= company.contact_number %></td>
        <td><%= company.address %></td>
        <td><%= company.mail_id %></td>
        <td><%= link_to 'Show', company,class: "btn btn-info" %></td>
        <% if can? :upadte, company %> 
          <td><%= link_to 'Edit', edit_company_path(company),class: "btn btn-info" %></td>
        <%end%>
        
      </tr>
    <% end %>
  </tbody>
</table>
</div>
<%end%>
<br>

<script type="text/javascript">
   $('#myTable').DataTable();  
</script>
